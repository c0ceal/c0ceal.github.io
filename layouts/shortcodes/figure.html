<figure {{ with .Get "class" }}class="{{ . }}"{{ end }}>
    {{ with .Get "link" }}<a href="{{ . }}">{{ end }}
      <img src="{{ .Get "src" }}" 
      {{ if or (.Get "alt") (.Get "caption") }}
      alt="{{ with .Get "alt" }}{{ . }}
      {{ else }}
          {{ .Get "caption" }}
      {{ end }}"{{ end }} />
      {{ if .Get "link" }}</a>{{ end }}
      {{ if or (or (.Get "title") (.Get "caption")) (.Get "attr") (.Get "year") }}
        <figcaption class="image-caption">
            <span class="title-desc">
                {{ if isset .Params "title" }}
                <h3><em>{{ .Get "title" }}</em></h3>{{ end }}
                {{ if or (.Get "caption") (.Get "attr") }}
                <p class="mt-0">
                    {{ .Get "caption" }}
                    {{ with .Get "attrlink" }}<a href="{{ . }}"> {{ end }}
                    {{ .Get "attr" }}
                    {{ if .Get "attrlink" }}</a> {{ end }}
                </p> {{ end }}
            </span>
            {{ with .Get "year" }}
            <span class="year">
                <p>{{ . }}</p>
            </span>
            {{ end }}
        </figcaption>
    {{ end }}
  </figure>